{% extends "base.html" %}

{% block title %}Batch Upload - Resume Evaluator{% endblock %}

{% block content %}
<div class="row">
    <div class="col-12">
        <h2 class="mb-4"><i class="fas fa-file-upload"></i> Batch Resume Upload</h2>
        <p class="text-muted">Upload multiple resumes at once for evaluation</p>
    </div>
</div>

<div class="row">
    <div class="col-lg-8">
        <div class="card shadow">
            <div class="card-body p-5">
                <form method="POST" action="{{ url_for('batch_upload') }}" enctype="multipart/form-data" id="batchForm">
                    <div class="mb-4">
                        <label for="resumes" class="form-label fw-bold">Select Resumes *</label>
                        <input type="file" class="form-control" id="resumes" name="resumes" 
                               accept=".pdf,.docx" multiple required>
                        <small class="text-muted">You can select up to 10 resumes at once (PDF or DOCX, max 16MB each)</small>
                    </div>
                    
                    <div id="fileList" class="mb-4"></div>
                    
                    <div class="mb-4">
                        <label for="job_description" class="form-label fw-bold">Job Description (Optional)</label>
                        <textarea class="form-control" id="job_description" name="job_description" rows="6" 
                                  placeholder="Paste the job description to calculate match percentage for all resumes..."></textarea>
                    </div>
                    
                    <button type="submit" class="btn btn-primary btn-lg w-100" id="submitBtn">
                        <i class="fas fa-magic"></i> Evaluate All Resumes
                    </button>
                </form>
            </div>
        </div>
        
        <div class="card mt-4">
            <div class="card-body">
                <h5 class="card-title"><i class="fas fa-info-circle"></i> Batch Upload Benefits</h5>
                <ul class="list-unstyled">
                    <li><i class="fas fa-check text-success"></i> Evaluate multiple resumes simultaneously</li>
                    <li><i class="fas fa-check text-success"></i> Compare candidates side-by-side</li>
                    <li><i class="fas fa-check text-success"></i> Save time with bulk processing</li>
                    <li><i class="fas fa-check text-success"></i> Export results in one click</li>
                </ul>
            </div>
        </div>
    </div>
</div>

<script>
document.getElementById('resumes').addEventListener('change', function(e) {
    const fileList = document.getElementById('fileList');
    fileList.innerHTML = '';
    
    if (this.files.length > 0) {
        fileList.innerHTML = '<h6>Selected Files:</h6>';
        const ul = document.createElement('ul');
        ul.className = 'list-group';
        
        Array.from(this.files).forEach((file, index) => {
            const li = document.createElement('li');
            li.className = 'list-group-item d-flex justify-content-between align-items-center';
            li.innerHTML = `
                <span><i class="fas fa-file-pdf text-danger"></i> ${file.name}</span>
                <span class="badge bg-primary">${(file.size / 1024 / 1024).toFixed(2)} MB</span>
            `;
            ul.appendChild(li);
        });
        
        fileList.appendChild(ul);
        
        if (this.files.length > 10) {
            alert('Maximum 10 files allowed. Please select fewer files.');
            this.value = '';
            fileList.innerHTML = '';
        }
    }
});
</script>
{% endblock %}